# Базовая программа тренировок

Документ фиксирует базовую версию программы и служит шаблоном, который можно развивать под индивидуальные цели. В настройках должно быть предусмотрено:
- добавление собственных упражнений в любой тренировочный день;
- изменение количества подходов, повторений и названий уровней;
- подключение альтернативных форматов плана (например, сплит по группам мышц, круговые тренировки, гибридные схемы).

## Недельный цикл
| Дни недели | Упражнение 1 | Уровень и подуровень | Название уровня | Подходы | Повторы | Упражнение 2 | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Понедельник | Подтягивания | 1.1 | Вертикальные подтягивания | 1 | 10 | Приседания | 1.1 | Приседания в стойке на плечах | 1 | 10 |
| Вторник | Отжимания | 1.1 | Отжимания от стены | 1 | 10 | Подъёмы ног | 1.1 | Подтягивание коленей к груди | 1 | 10 |
| Среда | Отжимания в стойке на руках | 1.1 | Стойка на голове у стены | 1 | 30 | Мостик | 1.1 | "Мостик" от плеч | 1 | 10 |
| Четверг | Подтягивания | 1.1 | Вертикальные подтягивания | 1 | 10 | Приседания | 1.1 | Приседания в стойке на плечах | 1 | 10 |
| Пятница | Отжимания | 1.1 | Отжимания от стены | 1 | 10 | Подъёмы ног | 1.1 | Подтягивание коленей к груди | 1 | 10 |
| Суббота | Отжимания в стойке на руках | 1.1 | Стойка на голове у стены | 1 | 30 | Мостик | 1.1 | "Мостик" от плеч | 1 | 10 |

### Периодизация
- **Стандартный цикл**: 3 недели прогрессии + 1 неделя разгрузки (−20% объёма, упор на технику и мобильность).
- **Альтернативы**:
  - «Силовая»: 2 недели интенсив → 1 неделя закрепления → 1 неделя разгрузки.
  - «Выносливость»: 4 недели с волновой нагрузкой (неделя 1 — база, неделя 2 — +10%, неделя 3 — база, неделя 4 — +15%).
- **Правила отдыха**: минимум 1 день полного отдыха после двух подряд тренировочных дней; при планировании утренних сессий восстанавливаться не менее 48 часов между одинаковыми паттернами (верх/низ).
- **Командировки/отпуск**: при флаге `special_mode` (см. правила ИИ) программа автоматически переключается на мини-комплексы 20 минут.

### Темп, отдых и техника
- **Обозначение темпа**: записывается в формате `TUT` (например, `3-1-1-0` для подтягиваний: 3 секунды вниз, 1 секундa пауза внизу, 1 секунда вверх, 0 паузы наверху). Для силовых упражнений темп по умолчанию `3-1-1-1`, для выносливости — `2-0-2-0`.
- **Интервалы отдыха**: между подходами 90–120 секунд для силовых, 60–90 секунд для выносливости, 45 секунд для мобилизаций. При переходе на новый уровень время отдыха увеличивается на 15 секунд первую неделю.
- **Контроль техники**: в план добавляются cue («локти направлены вниз», «корпус жёсткий», «дышим через нос»). Если отчёт содержит пометку «техника страдает», бот закрепляет уровень ещё на одну неделю и добавляет видео/описание.
- **Разминка и заминка**: каждая сессия содержит обязательные блоки — динамические движения 5 минут (круговые вращения, лёгкий кардио) и заминку 5 минут (растяжка/дыхание). Указывается в плане для соблюдения структуры.

### Адаптация под оборудование и условия
- **Без турника**: подтягивания заменяются на тягу резинки в дверях или австралийские подтягивания на столе. Прогрессия смещается на два уровня вниз для компенсации меньшей нагрузки.
- **Минимальное пространство**: приседания заменяются на выпады на месте, мостик — на разгибания в тазовом мосту. План отмечается тегом `space_limited`.
- **Доступ к гантелям/гири**: бот автоматически добавляет варианты с внешним весом и корректирует прогрессию (например, приседания с гирей 16 кг, 3×8). В Supabase хранится таблица `equipment_variations` с соответствиями.
- **Плохое покрытие пола**: упражнения лёжа заменяются на стоячие варианты (планка у стены, hollow hold standing). В отчёте бот просит подтвердить комфорт.
- **Режим восстановления**: при травмах план переключается на низкоударные упражнения (изометрия, активная растяжка). Темп замедляется до `4-2-2-2`, отдых увеличивается до 2 минут.

### Примеры адаптированных недель
- **Сила (4 тренировки)**:
  - Пн: подтягивания (5×5, темп 2-1-1-1, отдых 120 сек), отжимания на брусьях (4×6), кор (L-sit прогрессия).
  - Ср: приседания пистолетом (5×3), болгарские приседания (3×8), планка (3×60 сек).
  - Пт: подтягивания с весом (5×3), отжимания в стойке (EMOM 10 мин). 
  - Сб: активное восстановление (мобилизация плеч, растяжка бедра, дыхание по квадрату 4-4-4-4).
- **Выносливость (3 тренировки)**:
  - Пн: круг 4 раунда — подтягивания 8, отжимания 12, приседания 20, отдых 90 сек.
  - Ср: интервалы 30/30 секунд (планка/отдых) 8 подходов, планка боковая 3×45 сек.
  - Пт: комплекс EMOM 20 (подтягивания 5, отжимания 10, приседания 15, hollow hold 20 сек).
- **Восстановление после травмы плеча (3 тренировки)**:
  - Пн: тяга резинки 3×12, face pull 3×15, изометрия Y/T/W 3×20 сек, дыхание диафрагмой.
  - Ср: приседания 4×12, glute bridge 4×15, планка на предплечьях 3×45 сек.
  - Пт: мобилизация грудного отдела, упражнения на лопатки с мини-резинкой, растяжка.

### Структура отчётов и планов
- Пример дневного плана: 
  ```
  Цель: удержать прогресс подтягиваний, удерживая RPE ≤ 7.
  Разминка: суставная гимнастика 5 минут, лёгкая скакалка 3 минуты.
  Основная часть:
  - Подтягивания 5×5, темп 2-1-1-1, отдых 120 сек.
  - Отжимания на кольцах 4×8, темп 3-1-1-1, отдых 90 сек.
  - Планка на предплечьях 3×60 сек.
  Заминка: растяжка широчайших, грудных, дыхание 2 минуты.
  Следующий шаг: отметить RPE и ощущения плеча.
  ```
- Пример недельного отчёта: включает суммарный объём, средний RPE, количество пропусков, ключевой прогресс (например, «+1 подход в подтягиваниях»), планы корректировок и рекомендации по восстановлению (сон, питание).
- Пример месячного отчёта: динамика уровней по каждому упражнению, диаграмма объёма, % выполнения плана, заметки по самочувствию. Добавляется блок «фокус следующего месяца».

### Адаптация расписания
- В настройках пользователь может выбрать число тренировок (3, 4, 5, 6). Бот распределяет упражнения согласно приоритету: подтягивания → отжимания → приседания → кор → мостик → стойка на руках.
- Допустимые модификации: замена упражнения на ближайшую по уровню вариацию (±1 уровень) или на силовой аналог (например, подтягивания ↔ тяга резинки).
- Переносы фиксируются в `plan_versions`, чтобы бот мог анализировать частоту изменений.

## Прогрессии базовых упражнений
Ниже перечислены шесть ключевых упражнений с полными прогрессиями. Они служат ориентиром для программы по умолчанию, но каждый уровень может быть адаптирован пользователем в настройках.

### Подтягивания
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Подтягивания | 1.1 | Вертикальные подтягивания | 1 | 10 |
| Подтягивания | 1.2 | Вертикальные подтягивания | 2 | 20 |
| Подтягивания | 1.3 | Вертикальные подтягивания | 3 | 40 |
| Подтягивания | 2.1 | Горизонтальные подтягивания | 1 | 10 |
| Подтягивания | 2.2 | Горизонтальные подтягивания | 2 | 20 |
| Подтягивания | 2.3 | Горизонтальные подтягивания | 3 | 30 |
| Подтягивания | 3.1 | Подтягивания "Складной нож" | 1 | 10 |
| Подтягивания | 3.2 | Подтягивания "Складной нож" | 2 | 15 |
| Подтягивания | 3.3 | Подтягивания "Складной нож" | 3 | 20 |
| Подтягивания | 4.1 | Неполные подтягивания | 1 | 8 |
| Подтягивания | 4.2 | Неполные подтягивания | 2 | 11 |
| Подтягивания | 4.3 | Неполные подтягивания | 2 | 15 |
| Подтягивания | 5.1 | Полные подтягивания | 1 | 5 |
| Подтягивания | 5.2 | Полные подтягивания | 2 | 8 |
| Подтягивания | 5.3 | Полные подтягивания | 2 | 10 |
| Подтягивания | 6.1 | Узкие подтягивания | 1 | 5 |
| Подтягивания | 6.2 | Узкие подтягивания | 2 | 8 |
| Подтягивания | 6.3 | Узкие подтягивания | 2 | 10 |
| Подтягивания | 7.1 | Разновысокие подтягивания | 1 | 5 |
| Подтягивания | 7.2 | Разновысокие подтягивания | 2 | 7 |
| Подтягивания | 7.3 | Разновысокие подтягивания | 2 | 9 |
| Подтягивания | 8.1 | Неполные подтягивания на одной руке | 1 | 4 |
| Подтягивания | 8.2 | Неполные подтягивания на одной руке | 2 | 6 |
| Подтягивания | 8.3 | Неполные подтягивания на одной руке | 2 | 8 |
| Подтягивания | 9.1 | Подтягивания на одной руке с поддержкой | 1 | 3 |
| Подтягивания | 9.2 | Подтягивания на одной руке с поддержкой | 2 | 5 |
| Подтягивания | 9.3 | Подтягивания на одной руке с поддержкой | 2 | 7 |
| Подтягивания | 10.1 | Подтягивания на одной руке | 1 | 1 |
| Подтягивания | 10.2 | Подтягивания на одной руке | 2 | 3 |
| Подтягивания | 10.3 | Подтягивания на одной руке | 2 | 6 |

### Приседания
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Приседания | 1.1 | Приседания в стойке на плечах | 1 | 10 |
| Приседания | 1.2 | Приседания в стойке на плечах | 2 | 25 |
| Приседания | 1.3 | Приседания в стойке на плечах | 3 | 50 |
| Приседания | 2.1 | Приседания "Складной нож" | 1 | 10 |
| Приседания | 2.2 | Приседания "Складной нож" | 2 | 20 |
| Приседания | 2.3 | Приседания "Складной нож" | 3 | 40 |
| Приседания | 3.1 | Приседания с поддержкой | 1 | 10 |
| Приседания | 3.2 | Приседания с поддержкой | 2 | 15 |
| Приседания | 3.3 | Приседания с поддержкой | 3 | 30 |
| Приседания | 4.1 | Неполные приседания | 1 | 8 |
| Приседания | 4.2 | Неполные приседания | 2 | 35 |
| Приседания | 4.3 | Неполные приседания | 3 | 50 |
| Приседания | 5.1 | Полные приседания | 1 | 5 |
| Приседания | 5.2 | Полные приседания | 2 | 10 |
| Приседания | 5.3 | Полные приседания | 2 | 30 |
| Приседания | 6.1 | Узкие приседания | 1 | 5 |
| Приседания | 6.2 | Узкие приседания | 2 | 10 |
| Приседания | 6.3 | Узкие приседания | 2 | 20 |
| Приседания | 7.1 | Разновысокие приседания | 1 | 5 |
| Приседания | 7.2 | Разновысокие приседания | 2 | 10 |
| Приседания | 7.3 | Разновысокие приседания | 2 | 20 |
| Приседания | 8.1 | Неполные приседания на одной ноге | 1 | 5 |
| Приседания | 8.2 | Неполные приседания на одной ноге | 2 | 10 |
| Приседания | 8.3 | Неполные приседания на одной ноге | 2 | 20 |
| Приседания | 9.1 | Приседания на одной ноге с поддержкой | 1 | 5 |
| Приседания | 9.2 | Приседания на одной ноге с поддержкой | 2 | 10 |
| Приседания | 9.3 | Приседания на одной ноге с поддержкой | 2 | 20 |
| Приседания | 10.1 | Приседания на одной ноге | 1 | 5 |
| Приседания | 10.2 | Приседания на одной ноге | 2 | 10 |
| Приседания | 10.3 | Приседания на одной ноге | 2 | 50 |

### Отжимания
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Отжимания | 1.1 | Отжимания от стены | 1 | 10 |
| Отжимания | 1.2 | Отжимания от стены | 2 | 25 |
| Отжимания | 1.3 | Отжимания от стены | 3 | 50 |
| Отжимания | 2.1 | Отжимания в наклоне | 1 | 10 |
| Отжимания | 2.2 | Отжимания в наклоне | 2 | 20 |
| Отжимания | 2.3 | Отжимания в наклоне | 3 | 40 |
| Отжимания | 3.1 | Отжимания на коленях | 1 | 10 |
| Отжимания | 3.2 | Отжимания на коленях | 2 | 15 |
| Отжимания | 3.3 | Отжимания на коленях | 3 | 30 |
| Отжимания | 4.1 | Неполные отжимания | 1 | 8 |
| Отжимания | 4.2 | Неполные отжимания | 2 | 12 |
| Отжимания | 4.3 | Неполные отжимания | 2 | 25 |
| Отжимания | 5.1 | Полные отжимания | 1 | 5 |
| Отжимания | 5.2 | Полные отжимания | 2 | 10 |
| Отжимания | 5.3 | Полные отжимания | 2 | 20 |
| Отжимания | 6.1 | Узкие отжимания | 1 | 5 |
| Отжимания | 6.2 | Узкие отжимания | 2 | 10 |
| Отжимания | 6.3 | Узкие отжимания | 2 | 20 |
| Отжимания | 7.1 | Разновысокие отжимания | 1 | 5 |
| Отжимания | 7.2 | Разновысокие отжимания | 2 | 10 |
| Отжимания | 7.3 | Разновысокие отжимания | 2 | 20 |
| Отжимания | 8.1 | Неполные отжимания на одной руке | 1 | 5 |
| Отжимания | 8.2 | Неполные отжимания на одной руке | 2 | 10 |
| Отжимания | 8.3 | Неполные отжимания на одной руке | 2 | 20 |
| Отжимания | 9.1 | Отжимания на одной руке с поддержкой | 1 | 5 |
| Отжимания | 9.2 | Отжимания на одной руке с поддержкой | 2 | 10 |
| Отжимания | 9.3 | Отжимания на одной руке с поддержкой | 2 | 20 |
| Отжимания | 10.1 | Отжимания на одной руке | 1 | 5 |
| Отжимания | 10.2 | Отжимания на одной руке | 2 | 10 |
| Отжимания | 10.3 | Отжимания на одной руке | 1 | 100 |

### Подъёмы ног
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Подъёмы ног | 1.1 | Подтягивание коленей к груди | 1 | 10 |
| Подъёмы ног | 1.2 | Подтягивание коленей к груди | 2 | 25 |
| Подъёмы ног | 1.3 | Подтягивание коленей к груди | 3 | 40 |
| Подъёмы ног | 2.1 | Подъёмы коленей из положения лёжа | 1 | 10 |
| Подъёмы ног | 2.2 | Подъёмы коленей из положения лёжа | 2 | 20 |
| Подъёмы ног | 2.3 | Подъёмы коленей из положения лёжа | 3 | 35 |
| Подъёмы ног | 3.1 | Подъёмы согнутых ног из положения лёжа | 1 | 10 |
| Подъёмы ног | 3.2 | Подъёмы согнутых ног из положения лёжа | 2 | 15 |
| Подъёмы ног | 3.3 | Подъёмы согнутых ног из положения лёжа | 3 | 30 |
| Подъёмы ног | 4.1 | Подъёмы ног "Лягушка" | 1 | 8 |
| Подъёмы ног | 4.2 | Подъёмы ног "Лягушка" | 2 | 15 |
| Подъёмы ног | 4.3 | Подъёмы ног "Лягушка" | 2 | 25 |
| Подъёмы ног | 5.1 | Подъёмы прямых ног из положения лёжа | 1 | 5 |
| Подъёмы ног | 5.2 | Подъёмы прямых ног из положения лёжа | 2 | 10 |
| Подъёмы ног | 5.3 | Подъёмы прямых ног из положения лёжа | 2 | 20 |
| Подъёмы ног | 6.1 | Подтягивание коленей в висе | 1 | 5 |
| Подъёмы ног | 6.2 | Подтягивание коленей в висе | 2 | 10 |
| Подъёмы ног | 6.3 | Подтягивание коленей в висе | 2 | 15 |
| Подъёмы ног | 7.1 | Подъёмы согнутых ног в висе | 1 | 5 |
| Подъёмы ног | 7.2 | Подъёмы согнутых ног в висе | 2 | 10 |
| Подъёмы ног | 7.3 | Подъёмы согнутых ног в висе | 2 | 15 |
| Подъёмы ног | 8.1 | Подъёмы ног в висе - "Лягушка" | 1 | 5 |
| Подъёмы ног | 8.2 | Подъёмы ног в висе - "Лягушка" | 2 | 10 |
| Подъёмы ног | 8.3 | Подъёмы ног в висе - "Лягушка" | 2 | 15 |
| Подъёмы ног | 9.1 | Неполные подъёмы прямых ног в висе | 1 | 5 |
| Подъёмы ног | 9.2 | Неполные подъёмы прямых ног в висе | 2 | 10 |
| Подъёмы ног | 9.3 | Неполные подъёмы прямых ног в висе | 2 | 15 |
| Подъёмы ног | 10.1 | Подъёмы прямых ног в висе | 1 | 5 |
| Подъёмы ног | 10.2 | Подъёмы прямых ног в висе | 2 | 10 |
| Подъёмы ног | 10.3 | Подъёмы прямых ног в висе | 1 | 30 |

### Мостик
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Мостик | 1.1 | "Мостик" от плеч | 1 | 10 |
| Мостик | 1.2 | "Мостик" от плеч | 2 | 25 |
| Мостик | 1.3 | "Мостик" от плеч | 3 | 50 |
| Мостик | 2.1 | Прямой "Мостик" | 1 | 10 |
| Мостик | 2.2 | Прямой "Мостик" | 2 | 20 |
| Мостик | 2.3 | Прямой "Мостик" | 3 | 40 |
| Мостик | 3.1 | "Мостик" из обратного наклона | 1 | 8 |
| Мостик | 3.2 | "Мостик" из обратного наклона | 2 | 15 |
| Мостик | 3.3 | "Мостик" из обратного наклона | 3 | 30 |
| Мостик | 4.1 | "Мостик" из упора на голову | 1 | 8 |
| Мостик | 4.2 | "Мостик" из упора на голову | 2 | 15 |
| Мостик | 4.3 | "Мостик" из упора на голову | 2 | 25 |
| Мостик | 5.1 | "Полумостик" | 1 | 8 |
| Мостик | 5.2 | "Полумостик" | 2 | 15 |
| Мостик | 5.3 | "Полумостик" | 2 | 20 |
| Мостик | 6.1 | Полный "Мостик" | 1 | 6 |
| Мостик | 6.2 | Полный "Мостик" | 2 | 10 |
| Мостик | 6.3 | Полный "Мостик" | 2 | 15 |
| Мостик | 7.1 | "Мостик" по стенке вниз | 1 | 3 |
| Мостик | 7.2 | "Мостик" по стенке вниз | 2 | 6 |
| Мостик | 7.3 | "Мостик" по стенке вниз | 2 | 10 |
| Мостик | 8.1 | "Мостик" по стенке вверх | 1 | 3 |
| Мостик | 8.2 | "Мостик" по стенке вверх | 2 | 4 |
| Мостик | 8.3 | "Мостик" по стенке вверх | 2 | 8 |
| Мостик | 9.1 | Неполный "Мостик" из положения стоя | 1 | 1 |
| Мостик | 9.2 | Неполный "Мостик" из положения стоя | 2 | 3 |
| Мостик | 9.3 | Неполный "Мостик" из положения стоя | 2 | 6 |
| Мостик | 10.1 | Полный "Мостик" из положения стоя | 1 | 1 |
| Мостик | 10.2 | Полный "Мостик" из положения стоя | 2 | 3 |
| Мостик | 10.3 | Полный "Мостик" из положения стоя | 2 | 30 |

### Отжимания в стойке на руках
| Упражнение | Уровень и подуровень | Название уровня | Подходы | Повторы |
| --- | --- | --- | --- | --- |
| Отжимания в стойке на руках | 1.1 | Стойка на голове у стены | 1 | 30 |
| Отжимания в стойке на руках | 1.2 | Стойка на голове у стены | 1 | 60 |
| Отжимания в стойке на руках | 1.3 | Стойка на голове у стены | 1 | 120 |
| Отжимания в стойке на руках | 2.1 | Стойка "Ворон" | 1 | 10 |
| Отжимания в стойке на руках | 2.2 | Стойка "Ворон" | 1 | 30 |
| Отжимания в стойке на руках | 2.3 | Стойка "Ворон" | 1 | 60 |
| Отжимания в стойке на руках | 3.1 | Стойка на руках у стены | 1 | 30 |
| Отжимания в стойке на руках | 3.2 | Стойка на руках у стены | 1 | 60 |
| Отжимания в стойке на руках | 3.3 | Стойка на руках у стены | 1 | 120 |
| Отжимания в стойке на руках | 4.1 | Неполные отжимания в стойке на руках у стены | 1 | 5 |
| Отжимания в стойке на руках | 4.2 | Неполные отжимания в стойке на руках у стены | 2 | 10 |
| Отжимания в стойке на руках | 4.3 | Неполные отжимания в стойке на руках у стены | 2 | 20 |
| Отжимания в стойке на руках | 5.1 | Отжимания в стойке на руках у стены | 1 | 5 |
| Отжимания в стойке на руках | 5.2 | Отжимания в стойке на руках у стены | 2 | 10 |
| Отжимания в стойке на руках | 5.3 | Отжимания в стойке на руках у стены | 2 | 15 |
| Отжимания в стойке на руках | 6.1 | Узкие отжимания в стойке на руках у стены | 1 | 5 |
| Отжимания в стойке на руках | 6.2 | Узкие отжимания в стойке на руках у стены | 2 | 9 |
| Отжимания в стойке на руках | 6.3 | Узкие отжимания в стойке на руках у стены | 2 | 12 |
| Отжимания в стойке на руках | 7.1 | Разновысокие отжимания в стойке на руках у стены | 1 | 5 |
| Отжимания в стойке на руках | 7.2 | Разновысокие отжимания в стойке на руках у стены | 2 | 8 |
| Отжимания в стойке на руках | 7.3 | Разновысокие отжимания в стойке на руках у стены | 2 | 10 |
| Отжимания в стойке на руках | 8.1 | Неполные отжимания на одной руке у стены | 1 | 4 |
| Отжимания в стойке на руках | 8.2 | Неполные отжимания на одной руке у стены | 2 | 6 |
| Отжимания в стойке на руках | 8.3 | Неполные отжимания на одной руке у стены | 2 | 8 |
| Отжимания в стойке на руках | 9.1 | Отжимания на одной руке с поддержкой у стены | 1 | 3 |
| Отжимания в стойке на руках | 9.2 | Отжимания на одной руке с поддержкой у стены | 2 | 4 |
| Отжимания в стойке на руках | 9.3 | Отжимания на одной руке с поддержкой у стены | 2 | 6 |
| Отжимания в стойке на руках | 10.1 | Отжимания в стойке на одной руке у стены | 1 | 1 |
| Отжимания в стойке на руках | 10.2 | Отжимания в стойке на одной руке у стены | 2 | 2 |
| Отжимания в стойке на руках | 10.3 | Отжимания в стойке на одной руке у стены | 2 | 5 |

## Кастомизация и дальнейшее развитие
- В интерфейсе планировщика должно быть легко изменить структуру недели, заменить упражнения или добавить третье упражнение в день.
- Для каждого уровня хранятся параметры по умолчанию (подходы, повторы), но пользователь может сохранять свои значения и переключаться между предустановками.
- Дополнительно разрешено подключение других прогрессий или форматов (например, гимнастические упражнения, силовые комплексы с отягощениями, интервальные протоколы).
- Все изменения должны сохраняться в базе данных и отображаться в аналитике прогресса.

## Критерии переходов между уровнями
- **Минимум подходов**: выполнить все запланированные подходы без снижения диапазона повторов и без «провалов» техники.
- **RPE**: не выше 8 для силовых уровней, не выше 6 для выносливости.
- **Субъективное самочувствие**: отсутствие отметок о боли в двух последних отчётах.
- **Автономность**: пользователь понимает технику (подтверждается ответом «готов» в диалоге или отсутствием запросов по технике).
- Если условие не выполнено, уровень повторяется либо снижается согласно документу о прогрессии.

## Синхронизация с базой данных и чат-ботом
- Таблица `training_sessions` хранит поле `plan_source` (`default_program`, `custom`, `mini_cycle`) для отслеживания происхождения плана.
- Пользовательские изменения из WebApp записываются в `plan_version_items` с флагом `customized=true`, чтобы ChatGPT учитывал модификации.
- Настройки интенсивности (`intensity_profile`: `balanced`, `strength`, `endurance`) сохраняются в `profiles.preferences` и подмешиваются в промпт планировщика.
- При смене программы бот подтверждает в чате и создаёт запись в `observability_events` (`event_type = program_switch`).
- API между WebApp и ботом: событие `program_update` → payload `{ "frequency": 4, "intensity_profile": "strength", "custom_exercises": ["австралийские подтягивания"] }`.
- Ограничения: не более 3 кастомных упражнений на день; дубликаты автоматически сливаются (ChatGPT предупреждает).
